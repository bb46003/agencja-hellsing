<section class="cechy active"   action-data="tab"  data-group="sheet"  data-tab="cechy">
    {{#each actor.system.cechy}}
        <div class="cecha">
            <div class="cecha-top">
                <div class="cecha-pojedyncza">
                    <label class="cecha-name">{{capital @key}}</label>
                    <select class="selector-cech" name="system.cechy.{{@key}}.value" data-cecha="{{@key}}">
                    {{#each (array 0 1 2 3)}}
                        <option value="{{this}}" {{#ifEquals this ../value}}selected{{/ifEquals}} >{{this}}</option>
                    {{/each}}
                    </select>
                </div>
                <div class="przewaga">
                    <label class="cecha-przewagi">PRZEWAGI</label>
                  <input type="number" name="system.cechy.{{@key}}.przewagi" value="{{lookup (lookup ../system.cechy @key) 'przewagi'}}">

                </div>
            </div>
            <div class="umiejetnosci">
                <label class="umiejetnosci-label">Umiejętności</label>
                <div class="lista-umiejetnosci">
                    <div class="glowna" data-key="{{@key}}">                       
                        {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "glowna") "label"))}}
                            <a class="fas fa-dice-d6" data-action="skillRoll" data-tooltip="Kliknij aby rzucić"></a>
                        {{/if}}
                        <input type="text"  name="system.cechy.{{@key}}.glowna.label" value="{{lookup (lookup (lookup ../system.cechy @key) "glowna") "label"}}"  />
                        <div class="checkbox-group">
                            {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "glowna") "label"))}}
                                {{~#with @key as |cechaKey|~}}
                                    {{#each (range 1 3) as |val|}}
                                    <label class="custom-checkbox">
                                        <input type="checkbox"  class="glowna-checkbox" data-key="{{cechaKey}}" data-skillType="glowna" data-val='{{val}}' data-action="setSkillValue"
                                        {{#if  (lte val (lookup (lookup (lookup ../../../system.cechy cechaKey) "glowna") "value"))}} checked {{/if}}>
                                    <span class="checkmark"></span>
                                    </label>
                                    {{/each}}
                                {{/with}}
                            {{/if}}
                        </div>
                    </div>
                    <div class="specjalna" data-key="{{@key}}">
                        {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna1") "label"))}}
                            <a class="fas fa-dice-d6"  data-action = "skillRoll" data-tooltip="Kliknij aby rzucić"></a>
                        {{/if}}
                        <input type="text"   name="system.cechy.{{@key}}.specjalna1.label" value="{{lookup (lookup (lookup ../system.cechy @key) "specjalna1") "label"}}" />
                        <div class="checkbox-group">
                              {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna1") "label"))}}
                                {{~#with @key as |cechaKey|~}}
                                    {{#each (range 1 4) as |val|}}
                                        <label class="custom-checkbox">
                                        <input type="checkbox" class="glowna-checkbox" data-key="{{cechaKey}}" data-val="{{val}}" data-action="setSkillValue" data-skillType="specjalna1"
                                        {{#if  (lte val (lookup (lookup (lookup ../../../system.cechy cechaKey) "specjalna1") "value"))}} checked {{/if}}>
                                     <span class="checkmark"></span>
                                    </label>
                                    {{/each}}
                               {{/with}}
                            {{/if}}
                        </div>
                    </div>
                    <div class="specjalna" data-key="{{@key}}">
                        {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna2") "label"))}}
                            <i class="fas fa-dice-d6" data-action="skillRoll" data-tooltip="Kliknij aby rzucić"></i>
                        {{/if}}
                        <input type="text"  name="system.cechy.{{@key}}.specjalna2.label" value="{{lookup (lookup (lookup ../system.cechy @key) "specjalna2") "label"}}"/>
                        <div class="checkbox-group">
                            {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna2") "label"))}}
                                {{~#with @key as |cechaKey|~}}
                                    {{#each (range 1 4) as |val|}}
                                        <label class="custom-checkbox">
                                        <input type="checkbox" class="glowna-checkbox" data-key="{{cechaKey}}" data-val="{{val}}" data-action="setSkillValue" data-skillType="specjalna2"
                                        {{#if  (lte val (lookup (lookup (lookup ../../../system.cechy cechaKey) "specjalna2") "value"))}} checked {{/if}}>
                                           <span class="checkmark"></span>
                                    </label>
                                    {{/each}}
                               {{/with}}
                            {{/if}}
                        </div>
                    </div>
                    <div class="specjalna" data-key="{{@key}}">
                        {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna3") "label"))}}
                            <i class="fas fa-dice-d6" data-action="skillRoll" data-tooltip="Kliknij aby rzucić"></i>
                        {{/if}}
                        <input type="text"name="system.cechy.{{@key}}.specjalna3.label" value="{{lookup (lookup (lookup ../system.cechy @key) "specjalna3") "label"}}"/>
                        <div class="checkbox-group">
                            {{#if (notEmpty (lookup (lookup (lookup ../system.cechy @key) "specjalna3") "label"))}}
                                {{~#with @key as |cechaKey|~}}
                                    {{#each (range 1 4) as |val|}}
                                        <label class="custom-checkbox">
                                        <input type="checkbox" class="glowna-checkbox" data-key="{{cechaKey}}" data-val="{{val}}" data-action="setSkillValue" data-skillType="specjalna3"
                                        {{#if  (lte val (lookup (lookup (lookup ../../../system.cechy cechaKey) "specjalna") "value"))}} checked {{/if}}>
                                          <span class="checkmark"></span>
                                    </label>
                                    {{/each}}
                               {{/with}}
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{/each}}
</section>